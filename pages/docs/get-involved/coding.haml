- @title = "Contributing Code"
- @summary = "How to issue a pull request."

%h2 Guidelines

%p Please read the <a href="https://bitmask.readthedocs.io/en/latest/hacking/contributing.html#contributing">official documentation</a> for more information about how to contribute.

The main repositories are located on <a href="https://0xacab.org/leap">Oxacab.org</a>, and you should try to create an account there. New users are limited to
one project or fork, so if you need to develop on multiple LEAP projects you
may want to <a href="https://0xacab.org/riseup/0xacab/issues">file a support ticket</a>. LEAP also mirrors its repositories on <a href="https://github.com/leapcode">github</a>, and you can submit pull requests there if you run into any
issues with Oxacab.org.

%h2 Example PR

%p All development happens via pull requests. To add a new feature or fix a bug, the developer must create a new branch off <code>master</code>, make their changes, and then issue a pull request for another developer to review before the changes get merged back into <code>master</code>.

%p Here is an example, using 0xacab with username <code>rms</code> and repository <code>bitmask-dev</code>. There are other ways to submit chaged code (e.g., diffs), but 0xacab is the easiest way to start contributing.

%p
  %b Step 1 &mdash; Fork on 0xacab

%p Login to 0xacab as 'rms' (replace 'rms' with your real username in all the examples below). Browse to #{link 'https://0xacab.org/leap/bitmask-dev'}, and click the fork button.

%p Now you should have a fork of the code available at <code>https://github.com/rms/bitmask-dev</code>.

%p
  %b Step 2 &mdash; Set up local clone

%p Clone the upstream repository:

%pre
  %code
    git clone https://leap.se/git/bitmask-dev
    cd bitmask-dev

%blockquote
  .p NOTE: Alternately, you can use the github mirror at <code>https://0xacab.org/leap/bitmask-dev</code>. It does not matter which one you choose.

%p
  %b Step 4 &mdash; Add a "remote" for your fork

%p Next, you need to add the fork you created on github as an alternate remote in your local repository:

%pre
  %code
    git remote add rms https://github.com/rms/bitmask-dev.git

%p
  %b Step 5 &mdash; Create a new feature branch

%pre
  %code
    git fetch origin
    git checkout master
    git checkout -b feature/my_new_feature

%p
  %b Step 6 &mdash; Hack away

%P Make all your changes in your <code>feature/my_new_feature</code> branch, with a separate <code>git commit</code> for each discrete modification you make.

%p
  %b Step 7 &mdash; Prepare for pull request

%p Once you are happy with your branch, prepare it for a pull request by rebasing on the latest upstream <code>master</code> branch. This will also give you an opportunity to clean up your commit history by squashing and changing commit messages.

%pre
  %code
    git fetch origin                    # ensure the latest
    git checkout feature/my_new_feature # if not already checked out
    git rebase -i master               # rebase and clean up commits

%p
  %b Step 8 &mdash; Submit pull request

%p Next, you will push your local feature branch to your fork on github, and then issue a pull request.

%pre
  %code
    git push rms feature/my_new_feature

%p Then browse to <code>https://github.com/rms/bitmask-dev</code>, where you will see a handy button to issue a pull request. Make sure that the upstream branch is <code>leapcode/bitmask-dev:master</code> and you are requesting the merge of <code>rms/bitmask-dev:feature/my_new_feature</code>.

Then you are done. Some other developer will get a notice of your pull request, review the changes, and merge into upstream <code>master</code> branch. If they have questions or comments, you will get an email from github.
